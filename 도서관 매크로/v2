# 도서관 매크로 v2

## 제작 배경(문제 인식)

1. 전버전(v1)의 근본적 오류
* SSR방식의 페이지에서 예약 시간인지 체크를 페이지를 받을때 이미 정해져서
* SSR방식인데도 불구하고 서버의 자원이 적어 예약 정시가 되면 새로고침에 5초가 걸림.

2. 순차적으로 진행되는 예약
* 예약을 1부터 순차적으로 진행하다 보니 첫번째에서 실패하게 될시 계속 밀려서 결국 실패하게 됨.

## 문제 해결 방안

1. 최근에 만들어져 CSR 방식을 채택하고 있는 모바일 웹앱사용
* 해당 웹앱은 메인페이지로 브라우져 에서 접근시 google playstore로 다이렉팅 됨 --> 엔드포인트로 접근해서 해당 문제 회피
2. find_elementry를 이용해 가장 위에 있는 버튼부터 클릭

## 제작
* 시간은 똑같은 서버를 이용하므로 v1의 함수 재사용, 30분에는 다시 서버 시간과 동기화.
* 매크로를 동작시킬 페이지가 다르다 보니 예약 과정은 처음부터 작성.
* 너무 빠를경우 이전에 선택했던 좌석의 팝업창이 나타나는 문제접이 있어서 0.1의 sleep사용.
* alert창 또는 button의 text를 이용해서 다른 좌석을 시도할지 혹은 완료 또는 불가로 종료할지를 결정.
  * 항상 비활성화 되어 있는 좌석이 선택될 경우 '모든 좌석이 예약됨', 종료.
  * 버튼의 메시지가 '휴관'일 경우 종료.
  * 예약 시간이 아닐경우 재시도.
  * 같은 타임에 예약한 좌석이 있을 경우, 종료.
  * 이외의 경우에는 재시도.
  
## 발전한 점
* CSR에 대한 selenium 사용.
* 엄청난 예외처리
